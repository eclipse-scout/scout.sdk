<!DOCTYPE html>
<!--
  This spec runner is used by the maven build.
  You can use it too while developing by executing
  mvn jasmine:bdd and connecting to http://localhost:8234/ with your browser.
  When using mvn verify, the server is started on http://localhost:64600/.
 -->
<html>
<head>
  <meta charset="UTF-8">
  $if(autoRefresh)$
  <meta http-equiv="refresh" content="$autoRefreshInterval$">
  $endif$
  <title>Jasmine Spec Runner</title>
  <script type="text/javascript">
    window.onerror = function(msg,url,line) {
      if (document.head) {
        var jserror = document.head.getAttribute('jmp_jserror') || '';
        if (jserror) {
          jserror += ':!:';
        }
        jserror += msg;
        document.head.setAttribute('jmp_jserror',jserror);
      }
    };
  </script>
  <link rel="shortcut icon" type="image/png" href="ext/WebContent/res/jasmine-2.5.2/jasmine_favicon.png">
  <link rel="stylesheet" type="text/css" href="ext/WebContent/res/jasmine-2.5.2/jasmine.css">
  <link rel="stylesheet" type="text/css" href="ext/jasmine/JasmineScout.css">

  <script type="text/javascript" src="ext/WebContent/res/jquery-3.3.1.js"></script>
  <script type="text/javascript" src="ext/WebContent/res/log4javascript-1.4.9/log4javascript.js"></script>
  <script type="text/javascript" src="ext/WebContent/res/jasmine-2.5.2/jasmine.js"></script>
  <script type="text/javascript" src="ext/WebContent/res/jasmine-2.5.2/jasmine-html.js"></script>
  <script type="text/javascript" src="ext/WebContent/res/jasmine-2.5.2/boot.js"></script>
  <script type="text/javascript" src="ext/WebContent/res/jasmine-2.5.2/plugins/jasmine-jquery.js"></script>
  <script type="text/javascript" src="ext/WebContent/res/jasmine-2.5.2/plugins/mock-ajax.js"></script>
  <script type="text/javascript" src="ext/jasmine/JasmineScoutModuleUtil.js"></script>
  <script type="text/javascript" src="ext/jasmine/JasmineScout.js"></script>
  <script type="text/javascript" src="ext/jasmine/boot.ext.js"></script>

  <script type="text/javascript">loadDynamicScript('ext/scout-module.js');</script>
  <script type="text/javascript">loadDynamicScript('ext/scout-test-module.js');</script>
  <script type="text/javascript">loadDynamicScript('src/main/js/${simpleArtifactName}-module.js');</script>

</head>
<body>
  <script type="text/javascript">
  // app initialization uses promises which are executed asynchronously
  // -> Use the clock to make sure all promise callbacks are executed before any test starts.
  jasmine.clock().install();
  scout.models.bootstrap = function(url) {
    return loadJsonModule(url).then(this.init.bind(this));
  };
  new ${simpleArtifactName}.App().init({
    bootstrap: {
      modelsUrl: 'src/main/js/${simpleArtifactName}-module.json'
    }
  });
  jasmine.clock().tick(1000);
  jasmine.clock().uninstall();
  </script>

  $specScriptTags$

</body>
</html>
